function changedwFlag(){dwPgflag=false}function downloadSeqArray(e,t,n,r){spotFlagSet=true;stopPlayingMedia();var i=e.id;var s=e.title;downloadFile(i,s,t,n,r)}function downloadFile(e,t,n,r,i){console.log("Download Start");dwPgflag=true;var s=1;var o=e;var u=t;$.each(downloadList,function(e,t){if(t.elementId==o){s=0}});if(n=="true"||n==true){var a=o.substr(1,1);if(a=="A"){downloadFileAudioMainYes(o,u,n,r,i)}else if(a=="V"){downloadFileVideoMain(o,u,n,r,i)}else{downloadFileDocMain(o,u,n,r,i)}}else if(isOnline){$.mobile.changePage("#DownloadsPage");showInProgress();if(s){var a=o.substr(1,1);var f="";var l=new Object;l.elementId=o;l.elementTitle=u;l.isDownloadedFlag=n;l.elementAudio=r;l.val=i;if(downloadList.length){if(a=="A"){f=sPath+"/"+o+".mp3";showProgress(u,o,r,"",i,f);downloadList.push(l)}else if(a=="V"){f=sPath+"/"+o+".mp4";showProgress(u,o,r,"",i,f);downloadList.push(l)}else{f=sPath+"/"+o+".pdf";showProgress(u,o,r,"",i,f);downloadList.push(l)}}else{downloadList.push(l);if(a=="A"){f=sPath+"/"+o+".mp3";showProgress(u,o,r,"",i,f);downloadFileAudioMainYes(o,u,n,r,i)}else if(a=="V"){f=sPath+"/"+o+".mp4";showProgress(u,o,r,"",i,f);downloadFileVideoMain(o,u,n,r,i)}else{f=sPath+"/"+o+".pdf";showProgress(u,o,r,"",i,f);downloadFileDocMain(o,u,n,r,i)}}}else{}}else{jAlert("Please go online to download file.","Tech Time")}}function findNextDownloadItem(e){var t="1";if(downloadList.length){$.each(downloadList,function(n,r){if(t=="1"){var i=r.elementId;var s=r.elementTitle;var o=r.isDownloadedFlag;var u=r.elementAudio;var a=r.val;var f=i.substr(1,1);if(f=="A"){downloadFileAudioMainYes(i,s,o,u,a)}else if(f=="V"){downloadFileVideoMain(i,s,o,u,a)}else{downloadFileDocMain(i,s,o,u,a)}t="0"}if(r.elementId==e){t="1"}})}else{fileObj=null}}function downloadFileAudioMainYes(e,t,n,r,i){var s=new FileTransfer;var o=t;var u=e;var a=u.substring(0,1);var f=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));var l=f.replace(/_/g," ").replace(/%20/g," ").replace(/%5B/g," ").replace(/%5D/g," ").split(" ").join(" ");currDownload="";currDownload=u;if(device.platform=="Android"){uri=encodeURI(o);filePath=sPath+"/"+u+".mp3.download"}else{uri=o;filePath=window.approotdir.fullpath+"/"+u+".mp3.download"}if(n=="true"||n==true){filePath=filePath.substring(0,filePath.lastIndexOf("."));playMedia(filePath,u,"audio")}else if(o!=""){if(isOnline){var c=u;document.getElementById("PB"+c).style.display="block";$("#P"+c+"L").text("Downloading...");s.onprogress=function(e){if(e.lengthComputable){$("#P"+u+"Progress").text(""+Math.round(100*(e.loaded/e.total))+"%")}else{loadingStatus.increment()}};fileObj=s;s.download(t,filePath,function(s){function a(e){console.log("New Path: "+e.fullPath)}function f(e){console.log(e.code)}var o=filePath.substring(filePath.lastIndexOf("/")+1,filePath.lastIndexOf("."));var u=o.slice(0,-4);window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(e){e.root.getDirectory("TechTime",{create:true,exclusive:false},function(e){s.moveTo(e,u+".mp3",a,f)},f)},f);analytics.trackEvent("AD Audios","Audio Downloads",l,1,function(){},function(e){});changeIsdownloadStatus(filePath,c,"audio");var h=-1;$.each(downloadList,function(t,n){if(n.elementId==e){h=t}});if(h!=-1){delete downloadList[h];downloadList.splice(h,1)}downloadComplete(c,t,n,r,i,filePath);if(spotLightFlag){if(currElementIdSpot!=""&&currElementtypeSpot!=""&&currElementcountNumSpot!=""){spotlightDataTypes(currElementIdSpot,currElementtypeSpot,currElementcountNumSpot)}}else{if(currElementId!=""&&currElementtype!=""&&currElementcountNum!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}}findNextDownloadItem(c);jsonPostAfterDownload('"'+currDownload+'"')},function(e){if(e.code!=4||e.code!="4"){jAlert("Download was not completed due to lost internet connection. Please connect to the Internet and re-download.","Tech Time")}console.log("download error"+e.source);console.log("download error source "+e.source);console.log("download error target "+e.target);console.log("upload error code"+e.code)})}else{jAlert("Please go online to download file.","Tech Time");$(".detailPageButton").css("border","0px")}}}function downloadFileVideoMain(e,t,n,r,i){var s=new FileTransfer;var o=t;var u=e;var a=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));var f=a.replace(/_/g," ").replace(/%20/g," ").replace(/%5B/g," ").replace(/%5D/g," ").split(" ").join(" ");currDownload="";currDownload=u;if(device.platform=="Android"){uri=encodeURI(o);filePath=sPath+"/"+u+".mp4.download"}else{uri=o;filePath=window.appRootDir.fullPath+"/"+u+".mp4.download"}if(n=="true"||n==true){filePath=filePath.substring(0,filePath.lastIndexOf("."));playMedia(filePath,u,"video")}else{if(uri!=""){if(isOnline){document.getElementById("PB"+u).style.display="block";$("#P"+u+"L").text("Downloading...");s.onprogress=function(e){if(e.lengthComputable){$("#P"+u+"Progress").text(""+Math.round(100*(e.loaded/e.total))+"%")}else{loadingStatus.increment()}};fileObj=s;s.download(t,filePath,function(s){function l(e){console.log("New Path: "+e.fullPath)}function c(e){console.log(e.code)}var o=filePath.substring(filePath.lastIndexOf("/")+1,filePath.lastIndexOf("."));var a=o.slice(0,-4);window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(e){e.root.getDirectory("TechTime",{create:true,exclusive:false},function(e){s.moveTo(e,a+".mp4",l,c)},c)},c);analytics.trackEvent("AD Videos","Video Downloads",f,1,function(){},function(e){});changeIsdownloadStatus(filePath,u,"video");var h=-1;$.each(downloadList,function(t,n){if(n.elementId==e){h=t}});if(h!=-1){delete downloadList[h];downloadList.splice(h,1)}downloadComplete(u,t,n,r,i,filePath);if(spotLightFlag){if(currElementIdSpot!=""&&currElementtypeSpot!=""&&currElementcountNumSpot!=""){spotlightDataTypes(currElementIdSpot,currElementtypeSpot,currElementcountNumSpot)}}else{if(currElementId!=""&&currElementtype!=""&&currElementcountNum!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}}findNextDownloadItem(u);jsonPostAfterDownload('"'+currDownload+'"')},function(e){jAlert("Download was not completed due to lost internet connection. Please connect to the Internet and re-download.","Tech Time");console.log("download error"+e.source);console.log("download error source "+e.source);console.log("download error target "+e.target);console.log("upload error code"+e.code)})}else{jAlert("Please go online to download file.","Tech Time");$(".detailPageButton").css("border","0px")}}}}function downloadFileDocMain(e,t,n,r,i){var s;var o=new FileTransfer;var u=t;var a=e;var f=a.substring(1,2);var l=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."));var c=l.replace(/_/g," ").replace(/%20/g," ").replace(/%5B/g," ").replace(/%5D/g," ").split(" ").join(" ");currDownload="";currDownload=a;if(device.platform=="Android"){uri=encodeURI(u);filePath=sPath+"/"+a+".pdf.download"}else{uri=u;filePath=window.appRootDir.fullPath+"/"+a+".pdf.download"}if(n=="true"||n==true){document.getElementById("a1").style.display="block";document.getElementById("a2").style.display="block";s=filePath;s=s.substring(8);openDeleteDocumentPath=filePath}else if(uri!=""){if(isOnline){var h;document.getElementById("PB"+a).style.display="block";$("#P"+a+"L").text("Downloading...");o.onprogress=function(e){if(e.lengthComputable){$("#P"+a+"Progress").text(""+Math.round(100*(e.loaded/e.total))+"%")}else{loadingStatus.increment()}};fileObj=o;o.download(t,filePath,function(o){function h(e){console.log("New Path: "+e.fullPath)}function p(e){console.log(e.code)}var u=filePath.substring(filePath.lastIndexOf("/")+1,filePath.lastIndexOf("."));var l=u.slice(0,-4);window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(e){e.root.getDirectory("TechTime",{create:true,exclusive:false},function(e){o.moveTo(e,l+".pdf",h,p)},p)},p);if(f=="P"){analytics.trackEvent("AD Presentations","Presentation Downloads",c,1,function(){},function(e){})}else if(f=="D"){analytics.trackEvent("AD Documents","Document Downloads",c,1,function(){},function(e){})}else{analytics.trackEvent("AD Transcripts","Transcript Downloads",c,1,function(){},function(e){})}changeIsdownloadStatus(filePath,a,"document");s=o.fullPath;s=s.substring(8);var d=-1;$.each(downloadList,function(t,n){if(n.elementId==e){d=t}});if(d!=-1){delete downloadList[d];downloadList.splice(d,1)}downloadComplete(a,t,n,r,i,filePath);if(spotLightFlag){if(currElementIdSpot!=""&&currElementtypeSpot!=""&&currElementcountNumSpot!=""){spotlightDataTypes(currElementIdSpot,currElementtypeSpot,currElementcountNumSpot)}}else{if(currElementId!=""&&currElementtype!=""&&currElementcountNum!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}}findNextDownloadItem(a);jsonPostAfterDownload('"'+currDownload+'"')},function(e){jAlert("Download was not completed due to lost internet connection. Please connect to the Internet and re-download.","Tech Time");console.log("download error"+e.source);console.log("download error source "+e.source);console.log("download error target "+e.target);console.log("upload error code"+e.code)})}else{jAlert("Please go online to download file.","Tech Time");$(".detailPageButton").css("border","0px")}}}function playMedia(e,t,n){document.getElementById("avPlayer").innerHTML="";$.mobile.changePage("#itemVideo");if(n=="audio"){var r="";audioStreamUrl=e;r="<br>"+"<video id ='audioComp'  width='300px' height='100px' autobuffer onclick='streamAudio()'>"+"<source  type='audio/mpeg'></source>"+"Your browser does not support the Audio tag"+"</video><br>";$("#itemTitle").html("Audio Player");$("#avPlayer").html(r);$("#audioComp").attr("src",e);var i=document.getElementsByTagName("video")[0];i.src=e}if(n=="video"){var s="";videoStreamUrl=e;s="<br>"+"<video id ='videoComp'  width='300px' height='250px' onclick='streamVideo()' autobuffer >"+"<source type='video/wmv'></source>"+"our browser does not support the video tag."+"</video><br>";$("#itemTitle").html("Video Player");$("#avPlayer").html(s);var o=document.getElementsByTagName("video")[0];o.src=e}}function openDocument(){var e="";e=openDeleteDocumentPath.substring(8);e=e.substring(0,e.lastIndexOf("."));downloadPDF(e);hidePopup()}function deleteDocument(){var e="";var t="";var n="";e=openDeleteDocumentPath.lastIndexOf("/");t=openDeleteDocumentPath.lastIndexOf(".");t=t-e;n=openDeleteDocumentPath.substr(e+1,t-1);openDeleteDocumentPath=openDeleteDocumentPath.substring(0,openDeleteDocumentPath.lastIndexOf("."));deleteFile(openDeleteDocumentPath);if(spotLightFlag){if(currElementIdSpot!=""&&currElementtypeSpot!=""&&currElementcountNumSpot!=""){spotlightDataTypes(currElementIdSpot,currElementtypeSpot,currElementcountNumSpot)}}else{if(currElementId!=""&&currElementtype!=""&&currElementcountNum!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}}changeIsdownloadStatusAfterDelete(openDeleteDocumentPath,n,"delete");try{var r=function(t){};window.requestFileSystem(LocalFileSystem.PERSISTENT,0,gotFS,r)}catch(i){}hidePopup();$(this).css("border","none");if(spotLightFlag){if(currElementIdSpot!=""&&currElementtypeSpot!=""&&currElementcountNumSpot!=""){spotlightDataTypes(currElementIdSpot,currElementtypeSpot,currElementcountNumSpot)}}else{if(currElementId!=""&&currElementtype!=""&&currElementcountNum!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}}}function downloadPDF(e){PdfViewer.prototype.showPdf(e)}function showProgress(e,t,n,r,i,s){var o="";var u=document.getElementById("showProgressBar").innerHTML;var a="";if(i==1){a="<embed src='images/icon_audio.png' type='image/svg+xml' style='height:20px; width:20px;border:none;padding:0px;margin-right:10px'/>"}else if(i==2){a="<embed src='images/icon_video.png' type='image/svg+xml' style='height:20px; width:20px;border:none;padding:0px;margin-right:10px'/>"}else if(i==3){a="<img src='images/icon_presentation.png' style='height:15px; width:20px;border:none;padding:0px;margin-right:10px'/>"}else if(i==4){a="<img src='images/icon_transcript.png' style='height:15px; width:20px;border:none;padding:0px;margin-right:10px'/>"}else if(i==5){a="<embed src='images/icon_document.png' type='image/svg+xml' style='height:20px; width:20px;border:none;padding:0px;margin-right:10px'/>"}o=o+"<div id='P"+t+"' style='width:100%; border:none; background:#cccccc; color:white; padding-top:5px;'><table style='width:100%;'><tr>";o=o+"<td style='width:10%'><label style='margin-left:15px;'>"+a+"</label></td>";o=o+"<td style='width:80%'><div style='margin-left:2px;'><label style='color:#ffffff;margin-left:14px;'><b> "+n+"</b></label></div></td>";o=o+"<td style='width:10%'><img id ="+t+" src='images/cross_mark.png' title="+s+" style='height:18px; width:18px; float:right; margin-right:20px;' onclick='deleteProgress(this);' /></td></tr>";o=o+"<tr><td></td><td><label><img id='PB"+t+"' src='images/progressBar.gif' style='width:75%;height :80%;display:none;margin-left:2%'/></label></td>";o=o+"<td></td></tr>";o=o+"<tr><td></td><td 'width:50%'><label id='P"+t+"L' style='margin-left:15px;color:black;margin-left:14px;'>In queue</label><label id='P"+t+"Progress' style='font-size:14px;color:black;margin-left:5px;'></label>";o=o+"<br></td></tr></table><hr style='width:100%;background-color: grey; color: grey; height:1px;'>";$("#showProgressBar").append(o)}function abortCurrDownload(e){itemToDel=e;fileObj.abort(win,fail)}function win(){jAlert("File deleted successfully.","Tech Time")}function downloadComplete(e,t,n,r,i,s){var o=e;var u="";u="P"+e+"L";var a="PB"+e;e="P"+e;document.getElementById(a).style.display="none";$("#"+e).hide();$("#"+e).remove()}function deleteProgress(e){var t=e.id;var n=e.title;var r=$("#P"+t+"L").text();jConfirm("Are you sure you want to delete this item?","Tech Time",function(e){if(e==true){if(r=="Downloading..."){fileObj.abort(win,errorDeleteFileSystem);deleteProgessIfNoFile(n,t);findNextDownloadItem(t)}else{deleteProgessIfNoFile(n,t)}}})}function checkDWFileExists(e,t,n){window.resolveLocalFileSystemURI(e,function(){jConfirm("Are you sure you want to delete this item?","Tech Time",function(n){if(n==true){deleteProgessIfNoFile(e,t);deleteFile(e)}})},function(){jConfirm("Are you sure you want to delete this item?","Tech Time",function(n){if(n==true){deleteProgessIfNoFile(e,t)}})})}function deleteProgessIfNoFile(e,t){var n=t;t="P"+t;document.getElementById(t).innerHTML="";document.getElementById("showProgressBarImage").style.display="none";document.getElementById(t).style.visibility="hidden";if(document.getElementById("showProgressBarImage").style.display=="block"){document.getElementById("showProgressBarImage").style.display="none";document.getElementById(t).style.visibility="hidden"}if(document.getElementById(t).style.visibility=="visible"){document.getElementById(t).style.visibility="hidden";$("#"+t).remove()}var r=-1;$.each(downloadList,function(e,t){if(t.elementId==n){r=e}});if(r!=-1){var i=r;delete downloadList[i];downloadList.splice(r,1)}setTimeout(changeIsdownloadStatusAfterDelete(e,n,"delete"),500);$("#"+t).remove();if(spotLightFlag){if(currElementIdSpot!=""&&currElementtypeSpot!=""&&currElementcountNumSpot!=""){spotlightDataTypes(currElementIdSpot,currElementtypeSpot,currElementcountNumSpot)}}else{if(currElementId!=""&&currElementtype!=""&&currElementcountNum!=""){detailPageView(currElementId,currElementtype,currElementcountNum)}}}function copyPendingDownloadstoJson(){jsonData.pendingDownloads=downloadList;downloadList=[]}function readDownloadedList(e){var t="";var n="";$.each(e,function(e,r){var i=r.id;var s=r.title;var o=r.ddate;var u=r.val;if(u=="1"){n=r.path;downloadContentType="images/icon_audio.png";type="A"}else if(u=="2"){n=r.path;downloadContentType="images/icon_video.png";type="V"}else if(u=="3"){n=r.path;downloadContentType="images/icon_presentation.png";type="P"}else if(u=="4"){n=r.path;downloadContentType="images/icon_transcript.png";type="T"}else if(u=="5"){n=r.path;downloadContentType="images/icon_document.png";type="D"}var a=n.substring(n.lastIndexOf("/")+1,n.length);var f=sPath+"/images/"+i+"thumb.png";console.log("pathtoLocImage--"+f);t+="<div class='listItemClick'><a id="+i+" title="+a+"  onclick='downloadItemClick(this)' data-transition='slide' style='text-decoration:none;font-style:normal;color:black;display:block;background : #F0EFED'>";t=t+"<table border=0 style='width:100%;margin:0px;padding:0px;margin-top: 5px;margin-bottom: 5px;border:none;' cellpadding='0' cellspacing='0'>";t=t+"<tr><td id='"+i+"' style='margin:0px;padding:0px;width:25%;height:100px;' rowspan='2' >";t=t+"<img src="+f+" style='height:75px;width:75px;border:solid 1px;margin:auto;margin-left:10px;margin-top:2%'></td>";t=t+"<td id='' style='margin:0px; padding:0px; width:65%;color: orange;font-style:bold;padding-left:12px;font-size:16px;padding-top:8px'><b>"+s+"</b></td>";t=t+"<td id='' style='margin:0px; padding:0px; width:15%;' align='right'>";t=t+"<img src='"+downloadContentType+"' style='border:none;padding:0px;margin-right:8px;height:20px;width:25px;vertical-align:middle'/>";t=t+"</td></tr>";t=t+"</table></div><hr style='width:100%;background-color: grey; color: grey; height:0.5px;'></a>"});$("#allDownloads").html(t)}function downloadItemClick(e){var t=e.id;var n=e.title;var r=n.charAt(1);var i="";if(r=="A"){i=sPath+"/"+n;playMedia(i,t,"audio")}else if(r=="V"){i=sPath+"/"+n;playMedia(i,t,"video")}else{i=sPath+"/"+n;i=i.substring(8);downloadPDF(i)}}function CheckAllDownloads(){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,gotFS,errorFileSystem);var e=new Array;$.each(jsonData.spotLight,function(t,n){if(n.isDownloadedAudio=="true"||n.isDownloadedAudio=="true"||n.isDownloadedAudio==true){{var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;r.path=n.localPathAudio;r.ddate=n.downloadedDateA;e.push(r)}}if(n.isDownloadedVideo=="true"||n.isDownloadedVideo=="true"||n.isDownloadedVideo==true){{var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;r.path=n.localPathVideo;r.ddate=n.downloadedDateV;e.push(r)}}if(n.isDownloadedPresentation=="true"||n.isDownloadedPresentation=="true"||n.isDownloadedPresentation==true){{var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;r.path=n.localPathPresentation;r.ddate=n.downloadedDateP;e.push(r)}}if(n.isDownloadedTranscript=="true"||n.isDownloadedTranscript=="true"||n.isDownloadedTranscript==true){{var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;r.path=n.localPathTranscript;r.ddate=n.downloadedDateT;e.push(r)}}if(n.isDownloaded=="true"||n.isDownloaded==true){var r=new Object;r.id=n.itemId;r.val="5";r.title=n.title;r.path=n.localPath;r.ddate=n.downloadedDateD;e.push(r)}});$.each(jsonData.audio,function(t,n){if(n.isDownloadedAudio=="true"||n.isDownloadedAudio=="true"||n.isDownloadedAudio==true){{var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;r.path=n.localPathAudio;r.ddate=n.downloadedDateA;e.push(r)}}if(n.isDownloadedVideo=="true"||n.isDownloadedVideo=="true"||n.isDownloadedVideo==true){{var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;r.path=n.localPathVideo;r.ddate=n.downloadedDateV;e.push(r)}}if(n.isDownloadedPresentation=="true"||n.isDownloadedPresentation=="true"||n.isDownloadedPresentation==true){{var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;r.path=n.localPathPresentation;r.ddate=n.downloadedDateP;e.push(r)}}if(n.isDownloadedTranscript=="true"||n.isDownloadedTranscript=="true"||n.isDownloadedTranscript==true){{var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;r.path=n.localPathTranscript;r.ddate=n.downloadedDateT;e.push(r)}}});$.each(jsonData.video,function(t,n){if(n.isDownloadedAudio=="true"||n.isDownloadedAudio=="true"||n.isDownloadedAudio==true){{var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;r.path=n.localPathAudio;r.ddate=n.downloadedDateA;e.push(r)}}if(n.isDownloadedVideo=="true"||n.isDownloadedVideo=="true"||n.isDownloadedVideo==true){{var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;r.path=n.localPathVideo;r.ddate=n.downloadedDateV;e.push(r)}}if(n.isDownloadedPresentation=="true"||n.isDownloadedPresentation=="true"||n.isDownloadedPresentation==true){{var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;r.path=n.localPathPresentation;r.ddate=n.downloadedDateP;e.push(r)}}if(n.isDownloadedTranscript=="true"||n.isDownloadedTranscript=="true"||n.isDownloadedTranscript==true){{var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;r.path=n.localPathTranscript;r.ddate=n.downloadedDateT;e.push(r)}}});$.each(jsonData.technologySessions,function(t,n){if(downloadedFiles.indexOf("VA"+n.itemId+".mp3")!=-1){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;r.path=n.localPathAudio;r.ddate=n.downloadedDateA;e.push(r)}if(downloadedFiles.indexOf("VV"+n.itemId+".mp4")!=-1){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;r.path=n.localPathVideo;r.ddate=n.downloadedDateV;e.push(r)}if(downloadedFiles.indexOf("VP"+n.itemId+".pdf")!=-1||downloadedFiles.indexOf("AP"+n.itemId+".pdf")!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;r.path=n.localPathPresentation;r.ddate=n.downloadedDateP;e.push(r)}if(downloadedFiles.indexOf("VT"+n.itemId+".pdf")!=-1||downloadedFiles.indexOf("AT"+n.itemId+".pdf")!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;r.path=n.localPathTranscript;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.panelDiscussions,function(t,n){if(n.isDownloadedAudio=="true"||n.isDownloadedAudio==true){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;r.path=n.localPathAudio;r.ddate=n.downloadedDateA;e.push(r)}if(n.isDownloadedVideo=="true"||n.isDownloadedVideo==true){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;r.path=n.localPathVideo;r.ddate=n.downloadedDateV;e.push(r)}if(downloadedFiles.indexOf("PP"+n.itemId+".pdf")!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;r.path=n.localPathPresentation;r.ddate=n.downloadedDateP;e.push(r)}if(downloadedFiles.indexOf("PT"+n.itemId+".pdf")!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;r.path=n.localPathTranscript;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.spotLightDownloaded,function(t,n){if(n.isDownloadedAudio=="true"||n.isDownloadedAudio==true){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;r.path=n.localPathAudio;r.ddate=n.downloadedDateA;e.push(r)}if(n.isDownloadedVideo=="true"||n.isDownloadedVideo==true){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;r.path=n.localPathVideo;r.ddate=n.downloadedDateV;e.push(r)}if(n.isDownloadedPresentation=="true"||n.isDownloadedPresentation==true){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;r.path=n.localPathPresentation;r.ddate=n.downloadedDateP;e.push(r)}if(n.isDownloadedTranscript=="true"||n.isDownloadedTranscript==true){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;r.path=n.localPathTranscript;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.interviews,function(t,n){if(n.isDownloadedAudio=="true"||n.isDownloadedAudio==true){var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;r.path=n.localPathAudio;r.ddate=n.downloadedDateA;e.push(r)}if(n.isDownloadedVideo=="true"||n.isDownloadedVideo==true){var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;r.path=n.localPathVideo;r.ddate=n.downloadedDateV;e.push(r)}if(downloadedFiles.indexOf("IP"+n.itemId+".pdf")!=-1){var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;r.path=n.localPathPresentation;r.ddate=n.downloadedDateP;e.push(r)}if(downloadedFiles.indexOf("IT"+n.itemId+".pdf")!=-1){var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;r.path=n.localPathTranscript;r.ddate=n.downloadedDateT;e.push(r)}});$.each(jsonData.documents,function(t,n){if(downloadedFiles.indexOf("DD"+n.itemId+".pdf")!=-1){var r=new Object;r.id=n.itemId;r.val="5";r.title=n.title;r.path=n.localPath;r.ddate=n.downloadedDateD;e.push(r)}});$.each(jsonData.techConf,function(t,n){if(n.isDownloadedAudio=="true"||n.isDownloadedAudio=="true"||n.isDownloadedAudio==true){{var r=new Object;r.id=n.itemId;r.val="1";r.title=n.title;r.path=n.localPathAudio;r.ddate=n.downloadedDateA;e.push(r)}}if(n.isDownloadedVideo=="true"||n.isDownloadedVideo=="true"||n.isDownloadedVideo==true){{var r=new Object;r.id=n.itemId;r.val="2";r.title=n.title;r.path=n.localPathVideo;r.ddate=n.downloadedDateV;e.push(r)}}if(n.isDownloadedPresentation=="true"||n.isDownloadedPresentation=="true"||n.isDownloadedPresentation==true){{var r=new Object;r.id=n.itemId;r.val="3";r.title=n.title;r.path=n.localPathPresentation;r.ddate=n.downloadedDateP;e.push(r)}}if(n.isDownloadedTranscript=="true"||n.isDownloadedTranscript=="true"||n.isDownloadedTranscript==true){{var r=new Object;r.id=n.itemId;r.val="4";r.title=n.title;r.path=n.localPathTranscript;r.ddate=n.downloadedDateT;e.push(r)}}});e.sort(function(e,t){var n=new Date(e.ddate),r=new Date(t.ddate);return r-n});var t=unique(e);readDownloadedList(t)}function refreshList(){$(".toggleButtonDiv").show();showSortedTAListing(selectedCategoryId,selectedCategoryName,"false","false","false","false");changeDropDown("type","All","All");changeDropDown("language","All","All")}function resetFilter(){$(".toggleButtonDiv").show();changeDropDown("type","All","All");changeDropDown("language","All","All")}function backnav(e){backPage(e)}function backPage(e){if(e=="detailMediaPage"){var t=window.localStorage.getItem("spotLightFlag");if(eventsFlag){var n=window.localStorage.getItem("eventmonth");var r=window.localStorage.getItem("currMonth");showUpcomingEventList(n,r);$.mobile.changePage("#UpcomingEventsPage",{transition:"none"});resetFilter()}else if(mediaFlag==true&&searchFromMainPage==false){if(!spotLightFlag){var i=window.localStorage.getItem("currentCategoryOff");var s=window.localStorage.getItem("currentCategoryIdOff");selectedCategoryId=s;selectedCategoryName=i;showTAListResult(i,s);$.mobile.changePage("#TAListResult",{transition:"none"})}else if(spotLightFlag==true&&mediaFlag==true){var i=window.localStorage.getItem("currentCategoryOff");var s=window.localStorage.getItem("currentCategoryIdOff");selectedCategoryId=s;selectedCategoryName=i;showTAListResult(i,s);$.mobile.changePage("#TAListResult",{transition:"none"})}else{$.mobile.changePage("#businessCategory",{transition:"none"})}}else if(mediaFlag==true&&searchFromMainPage==true){var o=window.localStorage.getItem("searchelement");var u=window.localStorage.getItem("media");var a=window.localStorage.getItem("valueElement");var f=window.localStorage.getItem("searchString");showSearchResult(o,u,a,f);$.mobile.changePage("#searchResultPage",{transition:"none"})}else{$.mobile.changePage("#businessCategory",{transition:"none"});resetFilter()}}else if(e=="qnaPage"){var l=window.localStorage.getItem("detailPageelementId");var c=window.localStorage.getItem("detailPagetype");var h=window.localStorage.getItem("detailPagecountNum");detailPageView(l,c,h);$.mobile.changePage("#detailMediaPage",{transition:"none"})}else if(e=="TAListResult"||e=="UpcomingEventsPage"||e=="aboutTectTimePage"||e=="contactUsPage"||e=="faqPage"){$.mobile.changePage("#businessCategory",{transition:"none"})}else if(e=="playlistsItemPage"){resetPlaylistLMRParameters();displayPlaylist();currentPlayingItemIndex=0;document.getElementById("playlistItemPlayer").pause();$.mobile.changePage("#PlaylistsPage",{transition:"none"})}else if(e=="sharePlaylistsPage"){resetPlaylistLMRParameters();displayPlaylist();resetSharePlaylistParameters();$.mobile.changePage("#PlaylistsPage",{transition:"none"})}else if(e=="addToPlaylistPage"){$.mobile.changePage("#detailMediaPage",{transition:"none"})}else if(e=="subscribePage"){$("#subscribePageContentArea").html("");$.mobile.changePage("#businessCategory",{transition:"none"})}else if(e=="DownloadsPage"){if(dwPgflag){if(spotLightFlag){l=window.localStorage.getItem("detailPageelementIdSpot");c=window.localStorage.getItem("detailPagetypeSpot");h=window.localStorage.getItem("detailPagecountNumSpot");dwPgflag=false;spotlightDataTypes(l,c,h)}else if(playlistItemsPageFlag){$.mobile.changePage("#playlistsItemPage")}else{var l=window.localStorage.getItem("detailPageelementId");var c=window.localStorage.getItem("detailPagetype");var h=window.localStorage.getItem("detailPagecountNum");detailPageView(l,c,h);$.mobile.changePage("#detailMediaPage",{transition:"none"})}}else{$.mobile.changePage("#businessCategory",{transition:"none"})}}else if(e=="detailAuthor"){if(eventsFlag){var p=window.localStorage.getItem("eventitemId");UpcomingEventsDetail(p);$.mobile.changePage("#detailMediaPage",{transition:"none"})}else if(mediaFlag){if(spotLightFlag){$.mobile.changePage("#businessCategory")}else{var l=window.localStorage.getItem("detailPageelementId");var c=window.localStorage.getItem("detailPagetype");var h=window.localStorage.getItem("detailPagecountNum");detailPageView(l,c,h);$.mobile.changePage("#detailMediaPage",{transition:"none"})}}else if(spotLightFlag){console.log("spotlight content");$.mobile.changePage("#businessCategory")}else{console.log("spotlight content elseeeeee");showSpotLightContent();$.mobile.changePage("#detailMediaPage",{transition:"none"})}}else if(e=="itemVideo"){if(mediaFlag==true&&dwFlag==false){var l=window.localStorage.getItem("detailPageelementId");var c=window.localStorage.getItem("detailPagetype");var h=window.localStorage.getItem("detailPagecountNum");detailPageView(l,c,h);$.mobile.changePage("#detailMediaPage",{transition:"none"})}else{$.mobile.changePage("#DownloadsPage",{transition:"none"})}}else if(e=="searchResultPage"){if(searchFromMediaPage){if(spotLightFlag){l=window.localStorage.getItem("detailPageelementIdSpot");c=window.localStorage.getItem("detailPagetypeSpot");h=window.localStorage.getItem("detailPagecountNumSpot");spotlightDataTypes(l,c,h)}else{var l=window.localStorage.getItem("detailPageelementId");var c=window.localStorage.getItem("detailPagetype");var h=window.localStorage.getItem("detailPagecountNum");detailPageView(l,c,h);$.mobile.changePage("#detailMediaPage",{transition:"none"})}}else if(searchFromEventsPage){var p=window.localStorage.getItem("eventitemId");UpcomingEventsDetail(p);$.mobile.changePage("#detailMediaPage",{transition:"none"})}else if(searchFromSpotlightPage){showSpotLightContent();$.mobile.changePage("#detailMediaPage",{transition:"none"})}else if(searchFromUpcomingEventsPage){var n=window.localStorage.getItem("eventmonth");var d=window.localStorage.getItem("eventcount");showUpcomingEventList(n,d);$.mobile.changePage("#UpcomingEventsPage",{transition:"none"})}else if(searchFromTAListResultPage){var i=window.localStorage.getItem("currentCategoryOff");var s=window.localStorage.getItem("currentCategoryIdOff");selectedCategoryId=s;selectedCategoryName=i;showTAListResult(i,s);$.mobile.changePage("#TAListResult",{transition:"none"})}else if(searchFromAuthorDetailPage){var v=window.localStorage.getItem("authorName");showAuthorDetailPage(v);$.mobile.changePage("#detailAuthor",{transition:"none"})}else if(searchFromDownloadsPage){showInProgress();$.mobile.changePage("#DownloadsPage",{transition:"none"})}else if(searchFromContactUsPage){contactUsFocus();$.mobile.changePage("#contactUsPage",{transition:"none"})}else if(searchFromAboutPage){showAboutTTArea();$.mobile.changePage("#aboutTectTimePage",{transition:"none"})}else if(searchFromplaylistPage){resetPlaylistLMRParameters();displayPlaylist();$.mobile.changePage("#PlaylistsPage",{transition:"none"})}else if(searchFromplaylistitemPage){$.mobile.changePage("#playlistsItemPage",{transition:"none"})}else if(searchSharePlaylistsPage){resetSharePlaylistForm();resetSharePlaylistParameters();$.mobile.changePage("#sharePlaylistsPage",{transition:"none"})}else if(searchAddToPlaylistPage){$.mobile.changePage("#addToPlaylistPage",{transition:"none"})}else if(searchContributePage){$.mobile.changePage("#ContributePage",{transition:"none"})}else if(searchFromFaqPage){showFaqContent();$.mobile.changePage("#faqPage",{transition:"none"})}else if(searchFroSubscribPage){showSubscribeContent();$.mobile.changePage("#subscribePage",{transition:"none"});$.mobile.changePage("#subscribePage",{transition:"none"})}else if(searchFromtechWatchPage){currentTechWatchItemId=window.localStorage.getItem("currentTechWatchItemId");currentTechWatchItemIndex=window.localStorage.getItem("currentTechWatchItemIndex");showTechWatchContent(currentTechWatchItemId,currentTechWatchItemIndex);$.mobile.changePage("#techWatchPage",{transition:"none"})}else{$.mobile.changePage("#businessCategory",{transition:"none"})}}else{$.mobile.changePage("#businessCategory",{transition:"none"})}}var filePath;var currDownload="";var prevPageId="";var dwPgflag=false;var itemToDel;var unique=function(e){var t=[],n=e.length,r,i,s;for(i=0;i<n;i++){r="";for(s=0;s<t.length;s++){if(e[i].path===t[s].path){r=true;break}}if(!r){t.push(e[i])}}return t}